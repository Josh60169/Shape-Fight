(()=>{"use strict";var t={957:(t,e,i)=>{i.d(e,{Z:()=>u});var s=i(81),n=i.n(s),h=i(645),r=i.n(h),a=i(667),o=i.n(a),l=new URL(i(841),i.b),c=r()(n()),d=o()(l);c.push([t.id,`#gameCanvas {\n    margin: auto;\n    background-color: #000;\n    border: thick solid lightgray;\n}\n\n#start-screen {\n    text-align: center;\n    margin: 20%;\n}\n\n#play-screen {\n    text-align: center;\n    margin-top: 20%;\n}\n\n#play-btn {\n    color: #FFF;\n    background-color: #414a4c;\n    width: 14em;\n    height: 14em;\n    border-radius: 100%;\n    font-family: 'Press Start 2P', cursive;\n}\n\n#play-btn:hover {\n    width: 15em;\n    height: 15em;\n}\n\n#start-button {\n    color: #FFF;\n    background-color: #0c164f;\n}\n\n#start-button:hover {\n    width: 15em;\n    height: 11em;\n}\n \n#how-to-play {\n    color: #FFF;\n    background-color: #ba1e68;\n}\n\n#how-to-play:hover {\n    width: 15em;\n    height: 11em;\n}\n\n#instructions {\n    text-align: center;\n    margin: 10%;\n}\n\n#back-btn {\n    color: #FFF;\n    background-color: #7649fe;\n}\n\n#back-btn:hover {\n    width: 15em;\n    height: 11em;\n}\n\n#text-instructions {\n    color: #FFF;\n    font-family: 'Press Start 2P', cursive;\n    font-size: 14px;\n    margin-top: 0;\n    margin-left: 0;\n    margin-right: 0;\n}\n\n.btn {\n    margin: 1%;\n    width: 14em;\n    height: 10em;\n    font-family: 'Press Start 2P', cursive;\n}\n\n#credits-btn {\n    color: #CDCDCD;\n    background-color: #fffdd0;\n}\n\n#credits-btn:hover {\n    width: 15em;\n    height: 11em;\n}\n\n#credits-back-btn {\n    margin: 1%;\n    width: 14em;\n    height: 10em;\n    font-family: 'Press Start 2P', cursive;\n    color: #FFF;\n    background-color: #7649fe;\n}\n\n#credits-back-btn:hover {\n    width: 15em;\n    height: 11em;\n}\n\n#credits-screen {\n    text-align: center;\n    margin: 10%;\n}\n\n#credits-txt {\n    color: #FFF;\n    font-family: 'Press Start 2P', cursive;\n    font-size: 14px;\n    margin-top: 0;\n    margin-left: 0;\n    margin-right: 0;\n}\n\n#title {\n    color: #FFF;\n    text-align: center;\n    font-family: 'Press Start 2P', cursive;\n}\n\nbody {\n    background-color: #1d1135;\n}\n\n#high-score {\n    color: #FFF;\n    font-family: 'Press Start 2P', cursive;\n}\n\n@font-face {\n    font-family: 'Press Start 2P';\n    src: url(${d}) format('truetype');\n}`,""]);const u=c},645:t=>{t.exports=function(t){var e=[];return e.toString=function(){return this.map((function(e){var i="",s=void 0!==e[5];return e[4]&&(i+="@supports (".concat(e[4],") {")),e[2]&&(i+="@media ".concat(e[2]," {")),s&&(i+="@layer".concat(e[5].length>0?" ".concat(e[5]):""," {")),i+=t(e),s&&(i+="}"),e[2]&&(i+="}"),e[4]&&(i+="}"),i})).join("")},e.i=function(t,i,s,n,h){"string"==typeof t&&(t=[[null,t,void 0]]);var r={};if(s)for(var a=0;a<this.length;a++){var o=this[a][0];null!=o&&(r[o]=!0)}for(var l=0;l<t.length;l++){var c=[].concat(t[l]);s&&r[c[0]]||(void 0!==h&&(void 0===c[5]||(c[1]="@layer".concat(c[5].length>0?" ".concat(c[5]):""," {").concat(c[1],"}")),c[5]=h),i&&(c[2]?(c[1]="@media ".concat(c[2]," {").concat(c[1],"}"),c[2]=i):c[2]=i),n&&(c[4]?(c[1]="@supports (".concat(c[4],") {").concat(c[1],"}"),c[4]=n):c[4]="".concat(n)),e.push(c))}},e}},667:t=>{t.exports=function(t,e){return e||(e={}),t?(t=String(t.__esModule?t.default:t),/^['"].*['"]$/.test(t)&&(t=t.slice(1,-1)),e.hash&&(t+=e.hash),/["'() \t\n]|(%20)/.test(t)||e.needQuotes?'"'.concat(t.replace(/"/g,'\\"').replace(/\n/g,"\\n"),'"'):t):t}},81:t=>{t.exports=function(t){return t[1]}},379:t=>{var e=[];function i(t){for(var i=-1,s=0;s<e.length;s++)if(e[s].identifier===t){i=s;break}return i}function s(t,s){for(var h={},r=[],a=0;a<t.length;a++){var o=t[a],l=s.base?o[0]+s.base:o[0],c=h[l]||0,d="".concat(l," ").concat(c);h[l]=c+1;var u=i(d),f={css:o[1],media:o[2],sourceMap:o[3],supports:o[4],layer:o[5]};if(-1!==u)e[u].references++,e[u].updater(f);else{var g=n(f,s);s.byIndex=a,e.splice(a,0,{identifier:d,updater:g,references:1})}r.push(d)}return r}function n(t,e){var i=e.domAPI(e);return i.update(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap&&e.supports===t.supports&&e.layer===t.layer)return;i.update(t=e)}else i.remove()}}t.exports=function(t,n){var h=s(t=t||[],n=n||{});return function(t){t=t||[];for(var r=0;r<h.length;r++){var a=i(h[r]);e[a].references--}for(var o=s(t,n),l=0;l<h.length;l++){var c=i(h[l]);0===e[c].references&&(e[c].updater(),e.splice(c,1))}h=o}}},569:t=>{var e={};t.exports=function(t,i){var s=function(t){if(void 0===e[t]){var i=document.querySelector(t);if(window.HTMLIFrameElement&&i instanceof window.HTMLIFrameElement)try{i=i.contentDocument.head}catch(t){i=null}e[t]=i}return e[t]}(t);if(!s)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");s.appendChild(i)}},216:t=>{t.exports=function(t){var e=document.createElement("style");return t.setAttributes(e,t.attributes),t.insert(e,t.options),e}},565:(t,e,i)=>{t.exports=function(t){var e=i.nc;e&&t.setAttribute("nonce",e)}},795:t=>{t.exports=function(t){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var e=t.insertStyleElement(t);return{update:function(i){!function(t,e,i){var s="";i.supports&&(s+="@supports (".concat(i.supports,") {")),i.media&&(s+="@media ".concat(i.media," {"));var n=void 0!==i.layer;n&&(s+="@layer".concat(i.layer.length>0?" ".concat(i.layer):""," {")),s+=i.css,n&&(s+="}"),i.media&&(s+="}"),i.supports&&(s+="}");var h=i.sourceMap;h&&"undefined"!=typeof btoa&&(s+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(h))))," */")),e.styleTagTransform(s,t,e.options)}(e,t,i)},remove:function(){!function(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t)}(e)}}}},655:t=>{t.exports=function(t,e){if(e.styleSheet)e.styleSheet.cssText=t;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(t))}}},841:(t,e,i)=>{t.exports=i.p+"21503c6a5385ab41dde9.ttf"}},e={};function i(s){var n=e[s];if(void 0!==n)return n.exports;var h=e[s]={id:s,exports:{}};return t[s](h,h.exports,i),h.exports}i.m=t,i.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return i.d(e,{a:e}),e},i.d=(t,e)=>{for(var s in e)i.o(e,s)&&!i.o(t,s)&&Object.defineProperty(t,s,{enumerable:!0,get:e[s]})},i.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),i.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),(()=>{var t;i.g.importScripts&&(t=i.g.location+"");var e=i.g.document;if(!t&&e&&(e.currentScript&&(t=e.currentScript.src),!t)){var s=e.getElementsByTagName("script");if(s.length)for(var n=s.length-1;n>-1&&!t;)t=s[n--].src}if(!t)throw new Error("Automatic publicPath is not supported in this browser");t=t.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),i.p=t})(),i.b=document.baseURI||self.location.href,i.nc=void 0,(()=>{let t=document.querySelector("#gameCanvas"),e=t.getContext("2d");t.width=1200,t.height=700;let s=t.width,n=t.height;function h(t,e,i){return t<0?t=s-i:t>s?t=i:e<0?e=n-i:e>n&&(e=i),[t,e]}function r(t){let e=new Audio(t);return e.loop=!0,e.volume=.5,e.play(),e}function a(t){return t.pause(),t.currentTime=0,t}function o(t,e){return t.volume=e,t.loop=!0,t.play(),t}function l(t){new Audio(t).play()}class c{constructor(t,e,i){this.x=t,this.y=e,this.radius=20,this.speed=250,this.velX=0,this.velY=0,this.visible=!0,this.angle=.5*Math.PI,this.color=i,this.noseX=this.x+Math.cos(this.angle)*this.radius||this.angle,this.noseY=this.y-Math.sin(this.angle)*this.radius||this.angle,this.name="ship",this.shipFire=!1,this.fireOn=!1,this.timer=0}update(t,e,i,s){[this.x,this.y]=h(this.x,this.y,this.radius),Math.abs(this.x-t)>this.radius/2&&Math.abs(this.y-e)>this.radius/2&&(this.angle=Math.atan2(this.y-e,t-this.x)||.5*Math.PI),i.w?(this.velX=Math.cos(this.angle)*this.speed,this.velY=Math.sin(this.angle)*this.speed,this.shipFire=!0,this.fireOn?this.fireOn=!1:this.fireOn=!0):(this.velX*=.99,this.velY*=.99,this.shipFire=!1),this.x+=this.velX*s,this.y-=this.velY*s,this.noseX=this.x+Math.cos(this.angle)*this.radius,this.noseY=this.y-Math.sin(this.angle)*this.radius}draw(){e.beginPath(),e.strokeStyle=this.color,e.fillStyle=this.color,e.moveTo(this.noseX,this.noseY),e.lineTo(this.x+Math.cos(this.angle+Math.PI/1.3)*this.radius,this.y-Math.sin(this.angle+Math.PI/1.3)*this.radius),e.lineTo(this.x+Math.cos(this.angle+Math.PI/1.3+(2*Math.PI-(this.angle+Math.PI/1.3)+(this.angle-Math.PI/1.3)))*this.radius,this.y-Math.sin(this.angle+Math.PI/1.3+(2*Math.PI-(this.angle+Math.PI/1.3)+(this.angle-Math.PI/1.3)))*this.radius),e.stroke(),e.fill(),e.closePath()}drawFire(t,e){this.timer%Math.round(e/4)==0&&t.shipFire&&(this.visible=!0,this.angle=t.angle+Math.PI,this.fireOn?(this.radius=15,this.fireOn=!1):(this.radius=10,this.fireOn=!0),this.x=t.x-(t.radius+t.radius/3)*-Math.cos(this.angle),this.y=t.y+(t.radius+t.radius/3)*-Math.sin(this.angle),this.noseX=this.x+Math.cos(this.angle)*this.radius,this.noseY=this.y-Math.sin(this.angle)*this.radius,this.draw()),this.timer++}drawLives(t){e.beginPath(),e.textAlign="right",e.textBaseline="top",e.fillStyle="#FFF",e.fillText("Lives: ",.85*s,30);let i=this.x,n=this.noseX;for(let e=0;e<t-1;e++)this.draw(),this.x+=2*this.radius,this.noseX+=2*this.radius;this.x=i,this.noseX=n}fireSound(t){return this.shipFire?o(t,.4):a(t)}resetShip(){this.x=s/2,this.y=n/2,this.radius=20,this.speed=250,this.velX=0,this.velY=0,this.visible=!0,this.angle=.5*Math.PI,this.color="lightBlue",this.noseX=this.x+Math.cos(this.angle)*this.radius||this.angle,this.noseY=this.y-Math.sin(this.angle)*this.radius||this.angle,this.name="ship",this.shipFire=!1,this.fireOn=!1,this.timer=0}}class d{constructor(t,e,i,s,n,h){this.x=t,this.y=e,this.radius=h,this.speed=s,this.angle=i,this.color=n,this.time=0,this.name="bullet"}update(t){[this.x,this.y]=h(this.x,this.y,this.radius),this.x+=Math.cos(this.angle)*this.speed*t,this.y-=Math.sin(this.angle)*this.speed*t,this.time+=t}draw(){e.fillStyle=this.color,e.fillRect(this.x,this.y,this.radius,this.radius)}}function u(t){let e=Math.round(4*Math.random())+1;return 1===e?[t,Math.random()*n]:2===e?[s-t,Math.random()*n]:3===e?[Math.random()*s,t]:[Math.random()*s,n-t]}const f=i.p+"c0d18d5e3b932eacb4944941f24141e8.mp3";class g{constructor(t,e){[this.x,this.y]=u(t),this.radius=15,this.color="lightGreen",this.speed=e,this.angle,this.time=0,this.fireRate=Math.round(500*Math.random()+1e3),this.name="square"}update(t,e,i){this.angle=Math.atan2(this.y-e,t-this.x),this.x+=Math.cos(this.angle)*this.radius*this.speed*i,this.y-=Math.sin(this.angle)*this.radius*this.speed*i,this.time++}draw(){e.fillStyle=this.color,e.fillRect(this.x,this.y,2*this.radius,2*this.radius)}fire(t){return this.time%this.fireRate==0&&(t.push(new d(this.x,this.y,this.angle,250,"lightGreen",5)),l(f)),t}}class y{constructor(t,e){[this.x,this.y]=u(t),this.radius=25,this.color="white",this.speed=e,this.angle,this.name="circle"}update(t,e,i){this.angle=Math.atan2(this.y-e,t-this.x),this.x+=Math.cos(this.angle)*this.radius*this.speed*i,this.y-=Math.sin(this.angle)*this.radius*this.speed*i}draw(){e.fillStyle=this.color,e.strokeStyle=this.color,e.beginPath(),e.arc(this.x,this.y,this.radius,0,2*Math.PI),e.stroke(),e.fill()}}const p=i.p+"58867f256138babac95ecbd8da29cc87.mp3";class x{constructor(t,e){[this.x,this.y]=u(t),this.radius=25,this.color="yellow",this.speed=e,this.angle,this.time=0,this.fireRate=Math.round(300*Math.random()+1500)}update(t,e,i){this.angle=Math.atan2(this.y-e,t-this.x),this.x+=Math.cos(this.angle)*this.radius*this.speed*i,this.y-=Math.sin(this.angle)*this.radius*this.speed*i,this.pointOne=[],this.time++,this.name="pentagon",this.hp=6}draw(){e.fillStyle=this.color,e.strokeStyle=this.color,e.beginPath();let t=2*Math.PI/5;for(let i=0;i<5;i++)e.lineTo(this.x+Math.cos(this.angle+t*i)*this.radius,this.y-Math.sin(this.angle+t*i)*this.radius);e.stroke(),e.fill(),e.closePath()}fire(t){if(this.time%this.fireRate==0){let e=2*Math.PI/5;for(let i=0;i<5;i++)t.push(new d(this.x+Math.cos(this.angle+e*i)*this.radius,this.y-Math.sin(this.angle+e*i)*this.radius,this.angle,187.5,"lightGreen",8)),l(p)}return t}}const m=i.p+"85476b1a5d717143b5f9990248e6867a.mp3";class v{constructor(t,e){[this.x,this.y]=u(t),this.radius=50,this.color="orange",this.speed=e,this.angle,this.time=0,this.fireRate=Math.round(300*Math.random()+1500)}update(t,e,i){this.angle=Math.atan2(this.y-e,t-this.x),this.x+=Math.cos(this.angle)*this.radius*this.speed*i,this.y-=Math.sin(this.angle)*this.radius*this.speed*i,this.pointOne=[],this.time++,this.name="octagon",this.hp=10}draw(){e.fillStyle=this.color,e.strokeStyle=this.color,e.beginPath();let t=2*Math.PI/8;for(let i=0;i<8;i++)e.lineTo(this.x+Math.cos(this.angle+t*i)*this.radius,this.y-Math.sin(this.angle+t*i)*this.radius);e.stroke(),e.fill(),e.closePath()}fire(t){if(this.time%this.fireRate==0){let e=2*Math.PI/8;for(let i=0;i<8;i++)t.push(new d(this.x+Math.cos(this.angle+e*i)*this.radius,this.y-Math.sin(this.angle+e*i)*this.radius,this.angle+e*i,187.5,"lightGreen",12)),l(m)}return t}}function b(t,e,i){e.x=s/2,e.y=n/2;for(let s=0;s<8+Math.round(.1*i);s++){const s=99*Math.random()+1;s<=50?t.push(new g(e.radius,3+.001*i)):s<=80?t.push(new y(e.radius,7.5+.001*i)):s<=95?t.push(new x(e.radius,1.2+.001*i)):t.push(new v(e.radius,.75+.001*i))}return t}class M{constructor(t,e){this.x=t,this.y=e}draw(t,i,s,n){e.beginPath(),e.strokeStyle=s,e.moveTo(t+this.x*n,i-this.y*n),e.lineTo(t-this.x*n,i+this.y*n),e.stroke()}dot(t,e){return this.x*t+this.y*e}unit(){let t=Math.sqrt(Math.pow(this.x,2)+Math.pow(this.y,2));return{x:this.x/t,y:this.y/t}}}function w(t,e,i,s,n,h,r,a,o){if("shield"===s){const s={x:2*i,y:i},l={x:.5*s.x,y:.5*s.y},c={x:t+i/2*Math.cos(o),y:e-i/2*Math.sin(o)},d={x:c.x,y:c.y},u=[P({x:c.x-l.x,y:c.y-l.y},d,o+Math.PI/2),P({x:c.x-l.x,y:c.y+l.y},d,o+Math.PI/2),P({x:c.x+l.x,y:c.y+l.y},d,o+Math.PI/2),P({x:c.x+l.x,y:c.y-l.y},d,o+Math.PI/2)];let f,g=new M(-(u[0].y-u[1].y),-(u[0].x-u[1].x)),y=new M(-(u[2].y-u[1].y),-(u[2].x-u[1].x));f="square"===a?{x:n,y:h,width:2*r,height:2*r}:{x:n-r,y:h-r,width:2*r,height:2*r};const p=[{x:f.x,y:f.y},{x:f.x+f.width,y:f.y},{x:f.x,y:f.y+f.height},{x:f.x+f.width,y:f.y+f.height}],x=[g,y,new M(-f.width,0),new M(0,-f.height)];for(let t=0;t<x.length;t++){let e,i,s,n;if([e,i]=S(u,x[t].unit()),[s,n]=S(p,x[t].unit()),e>n||s>i)return!1}return!0}if("ship"===s){if(Math.sqrt(Math.pow(t-n,2)+Math.pow(e-h,2))<i+r)return!0}else if("bullet"===s||"bullet"===a)if("square"===a){const s={x:t-i,y:e-i,width:2*i,height:2*i},a={x:n,y:h,width:2*r,height:2*r};if(s.x<a.x+a.width&&s.x+s.width>a.x&&s.y<a.y+a.height&&s.y+s.height>a.y)return!0}else if(Math.sqrt(Math.pow(t-n,2)+Math.pow(e-h,2))<i+r)return!0;return!1}function P(t,e,i){let s=t.x-e.x,n=t.y-e.y;return{x:s*Math.cos(-i)-n*Math.sin(-i)+e.x,y:s*Math.sin(-i)+n*Math.cos(-i)+e.y}}function S(t,e){let i,s,n=new M(e.x,e.y);for(let e=0;e<t.length;e++){let h=n.dot(t[e].x,t[e].y);(h<i||void 0===i)&&(i=h),(h>s||void 0===s)&&(s=h)}return[i,s]}const k=i.p+"576234e071ce641821192224b646b4bf.mp3";function F(t){t.pause(),t.currentTime=0}function I(t,e,i,s,n,h,r,a,o,l,c,d,u){e.fillStyle="black",e.fillRect(0,0,i,s),e.fillStyle="white",e.font="30px 'Press Start 2P'",e.textAlign="center",e.textBaseLine="middle",e.fillText("GAME OVER",i/2,s/2),n(),t.addEventListener("click",(e=>{let i=t.getBoundingClientRect(),s=e.clientX-i.left,n=e.clientY-i.top;l=s>=d.x&&s<=d.x+d.width&&n>=d.y&&n<=d.y+d.height,o=s>=u.x&&s<=u.x+u.width&&n>=u.y&&n<=u.y+u.height})),o||l?o?h():(r("start-screen",!0),r("gameCanvas",!1),c=a(k)):requestAnimationFrame((()=>I(t,e,i,s,n,h,r,a,o,l,c,d,u)))}class T{constructor(t,e,i){this.angle=2*Math.random()*Math.PI,this.x=t,this.y=e,this.radius=2,this.color=i,this.speed=62.5,this.velX=Math.cos(this.angle)*this.speed,this.velY=Math.sin(this.angle)*this.speed,this.visible=!0}update(t){this.velX*=.99,this.velY*=.99,this.x+=this.velX*t,this.y-=this.velY*t}draw(){e.strokeStyle=this.color,e.fillStyle=this.color,e.beginPath(),e.arc(this.x,this.y,this.radius,0,2*Math.PI),e.stroke(),e.fill(),e.closePath()}}function E(t,e,i,s){for(let n=0;n<i;n++)s.push(new T(t,e,"#E25822"));return s}class X{constructor(t,e,i,s,n){this.initX=t,this.initY=e,this.x=t,this.y=e,this.initWidth=s,this.initHeight=n,this.width=s,this.height=n,this.text=i,this.fontSize=15}draw(){e.beginPath(),e.strokeStyle="white",e.font=`${this.fontSize}px 'Press Start 2P'`,e.fillText(this.text,this.x+this.width/2,this.y+this.height/2),e.strokeRect(this.x,this.y,this.width,this.height+this.height/4),e.closePath()}listen(){t.addEventListener("mousemove",(e=>{let i=t.getBoundingClientRect(),s=e.clientX-i.left,n=e.clientY-i.top;s>=this.x&&s<=this.x+this.width&&n>=this.y&&n<=this.y+this.height?(this.fontSize=20,this.width=1.5*this.initWidth,this.height=1.5*this.initHeight,this.x=this.initX-this.width/5,this.y=this.initY-this.height/5):(this.fontSize=15,this.width=this.initWidth,this.height=this.initHeight,this.x=this.initX,this.y=this.initY)}))}}var L=i(379),R=i.n(L),Y=i(795),C=i.n(Y),A=i(569),B=i.n(A),O=i(565),q=i.n(O),$=i(216),N=i.n($),j=i(655),z=i.n(j),D=i(957),H={};H.styleTagTransform=z(),H.setAttributes=q(),H.insert=B().bind(null,"head"),H.domAPI=C(),H.insertStyleElement=N(),R()(D.Z,H),D.Z&&D.Z.locals&&D.Z.locals;const G=i.p+"a9821ec8e6de39141069ed8a0ebc1281.mp3",U=i.p+"75776fe533b3a34257afd2657a316ed4.mp3",W=i.p+"a57ddcdca9a2c35cef70ab629424a2a9.mp3",Z=i.p+"b292d55c811f2c10a4b16a9ae787928d.mp3",_=i.p+"2951537268f1e7e53f103235ccecbbc8.mp3";let V,J,Q,K,tt=3,et=1,it=new c(s/2,n/2,"lightBlue"),st=new c(.875*s,35,"lightBlue"),nt=new class{constructor(t,e,i,s){this.angle=s,this.cx=t,this.cy=e,this.color="red",this.rotSpeed=.1,this.radius=2.5*i,this.name="shield"}update(t,e,i,s){s&&(this.angle=i),this.cx=t,this.cy=e}draw(){e.lineWidth=10,e.beginPath(),e.strokeStyle=this.color,e.save(),e.translate(this.cx,this.cy),e.rotate(-this.angle+Math.PI/2),e.arc(0,0,this.radius,0,Math.PI,!0),e.stroke(),e.restore(),e.lineWidth=1,e.closePath()}}(it.x,it.y,it.radius,it.angle),ht=[],rt=[],at=[],ot=[],lt=[],ct=[],dt=1e3/60;const ut="highScore";let ft,gt=0,yt=!1,pt=new c(s/2,n/2,"orange"),xt=new Audio(_),mt=new X(s/2-70,n/4,"RESTART",140,25),vt=new X(s/2-90,3*n/4,"MAIN MENU",180,25),bt=!1,Mt=localStorage.getItem("highScore");null===Mt&&(Mt=0);let wt=document.querySelector("#high-score");function Pt(){tt=3,et=1,it.resetShip(),gt=0,K=a(K),t.visible=!0,ft=!1,bt=!1,St("start-screen",!1),St("gameCanvas",!0),Q=r(G),rt=b(rt,it,et).slice(0),V=Date.now(),Et()}function St(t,e){let i=e?"block":"none";document.getElementById(t).style.display=i}wt.innerText=`Score: ${Mt}`,document.getElementById("play-btn").addEventListener("click",(t=>{St("play-screen",!1),St("start-screen",!0),K=r(k)})),document.getElementById("start-button").addEventListener("click",(t=>{Pt()})),document.getElementById("how-to-play").addEventListener("click",(t=>{St("start-screen",!1),St("instructions",!0)})),document.getElementById("back-btn").addEventListener("click",(t=>{St("instructions",!1),St("start-screen",!0)})),document.getElementById("credits-btn").addEventListener("click",(t=>{St("start-screen",!1),St("credits-screen",!0)})),document.getElementById("credits-back-btn").addEventListener("click",(t=>{St("credits-screen",!1),St("start-screen",!0)}));const kt={x:void 0,y:void 0},Ft=[];function It(t,e){t:for(let i=0;i<t.length;i++)if(t[i].time>=e){t.splice(i,1);break t}return t}function Tt(){mt.listen(),mt.draw(),vt.listen(),vt.draw()}function Et(){if(e.fillStyle="black",e.fillRect(0,0,s,n),gt>Mt&&(Mt=gt,localStorage.setItem(ut,Mt)),function(t,i){e.fillStyle="white",e.font="15px 'Press Start 2P'",e.textAlign="left",e.textBaseline="top",e.fillText(`High Score: ${i}`,30,30),e.fillText(`Score: ${t}`,30,50),wt.innerText=`Score: ${i}`}(gt,Mt),st.drawLives(tt),[V,J]=function(t){let e=Date.now();return[e,(e-t)/1e3]}(V),J>dt?V-=J%dt:J<dt&&(V+=J%dt),0!==ct.length)t:for(let t=0;t<ct.length;t++){if(ct[t].update(J),0===Math.round(ct[t].velX)&&0===Math.round(ct[t].velY)){ct.splice(t,1);break t}ct[t].draw()}if(it.visible){if(it.update(kt.x,kt.y,Ft,J),it.draw(),pt.drawFire(it,dt),it.fireSound(xt),nt.update(it.x,it.y,it.angle,!1),nt.draw(),0!==ht.length){t:for(let t=0;t<ht.length;t++){ht[t].update(J),ht[t].draw();for(let e=0;e<rt.length;e++)if(w(ht[t].x,ht[t].y,ht[t].radius,"bullet",rt[e].x,rt[e].y,rt[e].radius,rt[e].name,nt.angle)){ct=E(rt[e].x,rt[e].y,5,ct),rt.splice(e,1),ht.splice(t,1),gt++;break t}}It(ht,.8)}if(0===rt.length&&(yt=!0,ht=[],ot=[],at=[],lt=[],it.visible=!1,Q=a(Q),l(U),setTimeout((()=>{et++,rt=b(rt,it,et),ct=[],it.visible=!0,Q=o(Q,.5)}),2e3)),0!==at.length){for(let t=0;t<at.length;t++)at[t].update(J),at[t].draw(),w(at[t].x,at[t].y,at[t].radius,"bullet",it.x,it.y,it.radius,it.name,nt.angle)&&(ct=E(it.x,it.y,50,ct),tt--,l(W),Q=a(Q),it.shipFire=!1,it.fireSound(xt),rt=[],ht=[],ot=[],at=[],lt=[],it.visible=!1,0===tt?(it.visible=!1,F(Q)):setTimeout((()=>{rt=b(rt,it,et),ct=[],it.visible=!0,Q=o(Q,.5)}),2e3));It(at,2)}if(0!==ot.length){for(let t=0;t<ot.length;t++)ot[t].update(J),ot[t].draw(),w(ot[t].x,ot[t].y,ot[t].radius,"bullet",it.x,it.y,it.radius,it.name,nt.angle)&&(ct=E(it.x,it.y,50,ct),tt--,l(W),Q=a(Q),it.shipFire=!1,it.fireSound(xt),rt=[],ht=[],ot=[],at=[],lt=[],it.visible=!1,0===tt?(it.visible=!1,F(Q)):setTimeout((()=>{rt=b(rt,it,et),ct=[],it.visible=!0,Q=o(Q,.5)}),2e3));It(ot,7)}if(0!==lt.length){for(let t=0;t<lt.length;t++)lt[t].update(J),lt[t].draw(),w(lt[t].x,lt[t].y,lt[t].radius,"bullet",it.x,it.y,it.radius,it.name,nt.angle)&&(ct=E(it.x,it.y,50,ct),tt--,l(W),Q=a(Q),it.shipFire=!1,it.fireSound(xt),rt=[],ht=[],ot=[],at=[],lt=[],it.visible=!1,0===tt?(it.visible=!1,F(Q)):setTimeout((()=>{rt=b(rt,it,et),ct=[],it.visible=!0,Q=o(Q,.5)}),2e3));It(lt,10)}let t=0;for(;t<rt.length;)rt[t].update(it.x,it.y,J),rt[t].draw(),"square"===rt[t].name?rt[t].fire(at):"pentagon"===rt[t].name?rt[t].fire(ot):"octagon"===rt[t].name&&rt[t].fire(lt),w(nt.cx,nt.cy,nt.radius,nt.name,rt[t].x,rt[t].y,rt[t].radius,rt[t].name,nt.angle)?1===Math.round(Math.random())?(ct=E(rt[t].x,rt[t].y,5,ct),rt.splice(t,1),t--):[rt[t].x,rt[t].y]=u(it.radius):w(it.x,it.y,it.radius,it.name,rt[t].x,rt[t].y,rt[t].radius,rt[t].name,nt.angle)&&(ct=E(it.x,it.y,50,ct),tt--,l(W),Q=a(Q),it.shipFire=!1,it.fireSound(xt),rt=[],ht=[],ot=[],at=[],lt=[],it.visible=!1,0===tt?(it.visible=!1,F(Q)):setTimeout((()=>{rt=b(rt,it,et),ct=[],it.visible=!0,Q=o(Q,.5)}),2e3)),t++}yt&&(e.fillStyle="white",e.font="30px 'Press Start 2P'",e.textAlign="center",e.textBaseline="middle",e.fillText(`LEVEL ${et+1}`,s/2,n/2),setTimeout((()=>{yt=!1}),1900)),0!==tt||0!==ct.length?requestAnimationFrame(Et):I(t,e,s,n,Tt,Pt,St,r,ft,bt,K,vt,mt)}document.body.addEventListener("keydown",(t=>{Ft[t.key]=!0})),document.body.addEventListener("keyup",(t=>{Ft[" "]&&nt.update(it.x,it.y,it.angle,!0),Ft[t.key]=!1})),document.body.addEventListener("mousemove",(e=>{let i=t.getBoundingClientRect();kt.x=e.clientX-i.left,kt.y=e.clientY-i.top})),t.addEventListener("click",(()=>{it.visible&&(ht.push(new d(it.noseX,it.noseY,it.angle,625,"orange",5)),l(Z))}))})()})();